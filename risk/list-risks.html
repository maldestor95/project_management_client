<html >            
            <form> 
                {{predicate}}:{{reverse}}
            </form>
            <table class="table table-striped table-bordered" id="list_risk">
                <tr class="title">
                    <td> 
                        Action
                    </td>
                    <td>Description
                        <input ng-model="search.description"></input>
                    </td>
                    <td ng-click="predicate='type';reverse=!reverse">type
                        <span ng-class="predicate=='type' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''">
                    </td>
                    <td ng-click="predicate='origine';reverse=!reverse">Origine
                        <span ng-class="predicate=='origine' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                    </td>  
                    <td ng-click="predicate='risk_opp';reverse=!reverse" title="Risque ou opportunité?">
                        Risques ou Opportunité
                        <span ng-class="predicate=='risk_opp' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                    </td>
                    <td ng-click="predicate='date_created';reverse=!reverse" title="Risque ou opportunité?">Date de création
                        <span ng-class="predicate=='date_created' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''">
                    </td>
                    <td ng-click="predicate='gravity';reverse=!reverse" title="gravity">
                        G <span ng-class="predicate=='gravity' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                    </td>
                    <td ng-click="predicate='probability';reverse=!reverse" title="probability">
                        P <span ng-class="predicate=='probability' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                        </td>
                    <td ng-click="predicate='criticity';reverse=!reverse" title="criticity">
                        C<span ng-class="predicate=='criticity' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                        </td>
                    <td>history.date</td>
                    <td ng-click="predicate='impact';reverse=!reverse" title="Impact">
                        Impact
                        <span ng-class="predicate=='impact' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                    </td>
                    <td ng-click="predicate='impact_desc';reverse=!reverse" title="Impact">Description de l'impact

                        <span ng-class="predicate=='impact_desc' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                        <input ng-model="search.impact"></input>
                    </td>
                    <td ng-click="predicate='Status_open';reverse=!reverse">Status
                        <span ng-class="predicate=='Status_open' ? reverse ? 'glyphicon glyphicon-chevron-down':'glyphicon glyphicon-chevron-up':''"></span>
                    </td>
                    <td>Action Préventive
                        <input ng-model="search.preventive_action"></input>
                    </td>
                    <td ng-click="predicate='Leader';reverse=!reverse">Responsable</td>
                </tr>
                <tr ng-repeat="risk in riskCtrl.risks |orderBy:predicate:reverse |filter:search">                    
                    <div  ng-init="editable=true">                    
                        <td><a href="#" ng-show="editable" ng-click="editable=!editable" title="Edit" class="btn btn-xs btn-defaut">
                                    <span class="glyphicon glyphicon-pencil"></span>  
                            </a>
                            <a href="#" ng-show="!editable" ng-click="riskCtrl.PUT(risk);editable=!editable" title="Update" class="btn btn-xs btn-defaut">
                                    <span class="glyphicon glyphicon-refresh"></span>  
                            </a>
                            <a href="#" ng-show="editable" ng-click="riskCtrl.delete(risk._id)" title="Delete" class="btn btn-xs btn-defaut">
                                    <span class="glyphicon glyphicon-trash"></span>  
                            </a>
                        </td>
                        <td>
                            <input ng-disabled="editable" type="text" name=""  ng-model="risk.description" value="{{risk.description}}" placeholder="">
                        </td>
                        <td>
                            <select  ng-show="!editable" class="select"  
                            ng-model="risk.type" 
                            ng-init="risk.type" 
                            ng-options="opt for opt in ['Management','Technique']">
                            </select>
                            <div ng-show="editable">
                                {{risk.type}}
                            </div>
                        </td>
                        <td>
                            <select  ng-show="!editable" class="select"  
                            ng-model="risk.origine" 
                            ng-init="risk.origine" 
                            ng-options="opt for opt in ['Interne','Externe']">
                            </select>
                            <div ng-show="editable">
                                {{risk.origine}}
                            </div> 
                        </td>  
                        <td>
                            <select  ng-show="!editable" class="select"  
                            ng-model="risk.risk_opp" 
                            ng-init="risk.risk_opp" 
                            ng-options="opt for opt in ['Risque','Opportunité']">
                            </select>
                            <div ng-show="editable">
                                {{risk.risk_opp}}
                            </div>                            
                        </td>
                        <td>{{risk.date_created | date : 'dd/MMM/yy'}}</td>
                        <td>
                            <select  ng-show="!editable" class="select"  
                            ng-model="risk.gravity" 
                            ng-options="opt for opt in ['1','2','3']"
                            title="1:Entraine des incidences mineures, légères, de peu d'importance, sans aucune incidence au niveau du client&#13;2 entraine des incidences graves, significatifs qui pourront avoir pour conséquences le non respect d'un aspect contractuel mineur&#13;3 entraine des dommages bloquants, catastrophiques, intolérables qui auront pour conséquence le non respect d'un aspect contractuel majeur">
                            </select>
                            <div ng-show="editable">
                                {{risk.gravity}}
                            </div>

                        </td>
                        <td>                        
                            <select ng-show="!editable"class="select"
                            ng-model="risk.probability" 
                            ng-options="opt for opt in ['1','2','3']" 
                            ng-init="risk.probability" 
                            title="1:Peu probable&#13;2:Très probable&#13;3:Certain"> 
                            </select>
                            <div ng-show="editable">
                                {{risk.probability}}
                            </div>
                        </td>
                        <td>{{risk.probability * risk.gravity}}</td>
                        <td>{{risk.history.date}}</td>
                        <td>{{risk.impact}}</td>                       
                        <td> 
                        <input ng-disabled="editable" type="text" name="" ng-model="risk.impact_desc" value="{{risk.impact_desc}}">
                        </td>
                        <td>
                            <select ng-show="!editable"class="select"
                            ng-model="risk.Status_open" 
                            ng-options="opt for opt in [true,false]" 
                            ng-init="risk.Status_open"> 
                            </select>
                            <div ng-show="editable">
                                {{risk.Status_open}}
                            </div>
                        </td>
                        <td><input ng-disabled="editable" type="text" name="" ng-model="risk.preventive_action" value="{{risk.preventive_action}}"></td>
                        <td><input ng-disabled="editable" type="text" name="" ng-model="risk.Leader" value="{{risk.Leader}}"></td>                    
                    </div>                   
                </tr>
            </table>
</html>